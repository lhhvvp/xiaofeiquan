<view class="merchant-info-page">
  <view wx:if="{{!hasBaseUrl}}" class="notice">
    baseUrl 未配置：请创建 miniprogram/config/local.js 并设置 { baseUrl }
  </view>

  <view class="hero" wx:if="{{detail}}">
    <image wx:if="{{detail.image}}" class="banner" src="{{detail.image}}" mode="aspectFill" />
    <view wx:if="{{detail.distanceText}}" class="distance-tag">距商家 {{detail.distanceText}}</view>
  </view>

  <view class="card page-card" wx:if="{{detail}}">
    <view class="name">{{detail.nickname || '商家详情'}}</view>
    <view class="meta">评分 {{detail.commentRate || 0}} 分 · {{detail.commentNum || 0}} 条评论</view>

    <view class="business-time">
      <text class="business-label">营业时间</text>
      <text class="business-value">{{detail.doBusinessTime || '-'}}</text>
    </view>

    <view class="row" bindtap="onTapCall">
      <view class="row-label">电话</view>
      <view class="row-value">{{detail.mobile || '暂无电话'}}</view>
    </view>

    <view class="row" bindtap="onTapNav">
      <view class="row-label">地址</view>
      <view class="row-value">{{detail.address || '暂无地址'}}</view>
    </view>

    <view class="actions">
      <button class="action-btn" size="mini" bindtap="onTapCall">拨打电话</button>
      <button class="action-btn" size="mini" bindtap="onTapNav">导航到店</button>
      <button class="action-btn primary" type="primary" size="mini" bindtap="onTapGoTickets">查看门票</button>
    </view>
  </view>

  <view class="card page-card" wx:if="{{detail && detail.contentHtml}}">
    <view class="section-title">商家介绍</view>
    <ui-rich-text nodes="{{detail.contentHtml}}"></ui-rich-text>
  </view>

  <view wx:if="{{error}}" class="error">error: {{error}}</view>
</view>
