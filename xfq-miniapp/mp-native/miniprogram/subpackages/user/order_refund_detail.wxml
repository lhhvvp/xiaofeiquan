<view class="container">
  <view wx:if="{{!hasBaseUrl}}" class="notice">
    baseUrl 未配置：请创建 miniprogram/config/local.js 并设置 { baseUrl }
  </view>

  <view wx:if="{{!hasLogin}}" class="notice">
    <view>查看售后详情需要先登录</view>
    <ui-button type="primary" size="mini" text="去登录" bind:tap="ensureLoginOrPrompt" />
  </view>

  <view wx:if="{{detail}}" class="status">{{detail.statusText}}</view>

  <view wx:if="{{detail && detail.refuseDesc}}" class="card">
    <view class="card-title">拒绝理由</view>
    <view class="text">{{detail.refuseDesc}}</view>
  </view>

  <view wx:if="{{detail}}" class="card">
    <view class="price-box">
      <view class="price-tit">退款金额</view>
      <view class="price">{{detail.refundFee}}</view>
    </view>

    <view class="row">
      <view class="label">景区名称</view>
      <view class="value">{{detail.sellerNickname}}</view>
    </view>
    <view class="row">
      <view class="label">订单金额</view>
      <view class="value">{{detail.orderAmountPrice}} 元</view>
    </view>
    <view class="row">
      <view class="label">退款时间</view>
      <view class="value">{{detail.createTimeText}}</view>
    </view>
    <view class="row">
      <view class="label">订单号</view>
      <view class="value">{{detail.tradeNo}}</view>
      <view class="copy" bindtap="onTapCopyTradeNo">复制</view>
    </view>
  </view>

  <view wx:if="{{detail && detail.tickets.length}}" class="card">
    <view class="card-title">退款门票信息</view>
    <view wx:for="{{detail.tickets}}" wx:key="index" class="ticket">
      <view class="row">
        <view class="label">姓名</view>
        <view class="value">{{item.fullname}}</view>
      </view>
      <view class="row">
        <view class="label">手机号</view>
        <view class="value">{{item.mobile}}</view>
      </view>
      <view class="row">
        <view class="label">身份证号</view>
        <view class="value">{{item.certId}}</view>
      </view>
    </view>
  </view>

  <ui-error wx:if="{{error}}" message="{{error}}" bind:retry="onRetry" />
</view>

