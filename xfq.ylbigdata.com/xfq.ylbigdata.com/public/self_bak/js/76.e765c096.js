"use strict";(self["webpackChunkticket"]=self["webpackChunkticket"]||[]).push([[76],{5076:function(e,a,l){l.d(a,{Z:function(){return b}});var t=l(3396),o=l(7139);const n={class:"page-box"},d={key:1,class:"head"},r={class:"title"},s={class:"toolbar"},i={class:"table"};function u(e,a,l,u,p,h){const c=(0,t.up)("el-option"),m=(0,t.up)("el-select"),g=(0,t.up)("el-radio"),y=(0,t.up)("el-radio-group"),w=(0,t.up)("el-radio-button"),f=(0,t.up)("el-checkbox"),b=(0,t.up)("el-checkbox-group"),k=(0,t.up)("el-checkbox-button"),M=(0,t.up)("el-date-picker"),V=(0,t.up)("el-input-number"),C=(0,t.up)("el-input"),j=(0,t.up)("el-form-item"),Y=(0,t.up)("el-button"),v=(0,t.up)("el-form"),D=(0,t.up)("el-table-column"),S=(0,t.up)("el-table"),U=(0,t.up)("el-pagination"),z=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",n,[e.search?((0,t.wg)(),(0,t.j4)(v,{key:0,class:"search",model:e.searchModel,inline:!0,"label-position":"left","label-width":e.search.labelWidth,ref:"searchForm"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.search.fields,(a=>((0,t.wg)(),(0,t.j4)(j,{key:a.name,label:a.label,prop:a.name},{default:(0,t.w5)((()=>["custom"===a.type?(0,t.WI)(e.$slots,a.slot,{key:0},void 0,!0):"select"===a.type?((0,t.wg)(),(0,t.j4)(m,{key:1,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,filterable:!!a.filterable,multiple:!!a.multiple,clearable:"",placeholder:`请选择${a.label}`,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.options,(e=>((0,t.wg)(),(0,t.j4)(c,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","filterable","multiple","placeholder","style"])):"radio"===a.type?((0,t.wg)(),(0,t.j4)(y,{key:2,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.options,(e=>((0,t.wg)(),(0,t.j4)(g,{key:e.value,label:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","style"])):"radio-button"===a.type?((0,t.wg)(),(0,t.j4)(y,{key:3,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.options,(e=>((0,t.wg)(),(0,t.j4)(w,{key:e.value,label:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","style"])):"checkbox"===a.type?((0,t.wg)(),(0,t.j4)(b,{key:4,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.options,(e=>((0,t.wg)(),(0,t.j4)(f,{key:e.value,label:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","style"])):"checkbox-button"===a.type?((0,t.wg)(),(0,t.j4)(b,{key:5,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.options,(e=>((0,t.wg)(),(0,t.j4)(k,{key:e.value,label:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","style"])):"date"===a.type?((0,t.wg)(),(0,t.j4)(M,{key:6,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,type:"date",format:"YYYY-MM-DD",clearable:"",onChange:l=>e.handleDateChange(l,a,"YYYY-MM-DD"),placeholder:`请选择${a.label}`,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","onChange","placeholder","style"])):"datetime"===a.type?((0,t.wg)(),(0,t.j4)(M,{key:7,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,type:"datetime",clearable:"",onChange:l=>e.handleDateChange(l,a,"YYYY-MM-DD HH:mm:ss"),format:"YYYY-MM-DD HH:mm:ss",placeholder:`请选择${a.label}`,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","onChange","placeholder","style"])):"daterange"===a.type?((0,t.wg)(),(0,t.j4)(M,{key:8,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,type:"daterange",format:"YYYY-MM-DD","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:"",onChange:l=>e.handleRangeChange(l,a,"YYYY-MM-DD"),style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","onChange","style"])):"datetimerange"===a.type?((0,t.wg)(),(0,t.j4)(M,{key:9,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,type:"datetimerange",format:"YYYY-MM-DD HH:mm:ss","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:"",onChange:l=>e.handleRangeChange(l,a,"YYYY-MM-DD HH:mm:ss"),style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","onChange","style"])):"number"===a.type?((0,t.wg)(),(0,t.j4)(V,{key:10,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,placeholder:`请输入${a.label}`,"controls-position":"right",min:a.min,max:a.max,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","placeholder","min","max","style"])):"textarea"===a.type?((0,t.wg)(),(0,t.j4)(C,{key:11,type:"textarea",clearable:"",modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,placeholder:`请输入${a.label}`,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","placeholder","style"])):((0,t.wg)(),(0,t.j4)(C,{key:12,modelValue:e.searchModel[a.name],"onUpdate:modelValue":l=>e.searchModel[a.name]=l,clearable:"",placeholder:`请输入${a.label}`,style:(0,o.j5)({width:e.search.inputWidth,...a.style})},null,8,["modelValue","onUpdate:modelValue","placeholder","style"]))])),_:2},1032,["label","prop"])))),128)),(0,t.Wm)(j,{class:"search-btn"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{type:"primary",onClick:e.handleSearch},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1},8,["onClick"]),(0,t.Wm)(Y,{onClick:e.handleReset},{default:(0,t.w5)((()=>[(0,t.Uk)("重置")])),_:1},8,["onClick"])])),_:1})])),_:3},8,["model","label-width"])):(0,t.kq)("",!0),e.hideTitleBar?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",d,[(0,t.WI)(e.$slots,"title",{},(()=>[(0,t._)("span",r,(0,o.zw)(e.title),1)]),!0),(0,t._)("div",s,[(0,t.WI)(e.$slots,"toolbar",{},void 0,!0)])])),(0,t._)("div",i,[(0,t.wy)(((0,t.wg)(),(0,t.j4)(S,{data:e.tableData,"row-key":e.rowKey,"tree-props":e.tree.treeProps,lazy:e.tree.lazy,load:e.tree.load,"tooltip-effect":"dark",stripe:"",border:e.border,onSelectionChange:e.handleSelectionChange,ref:"table"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.columns,(a=>((0,t.wg)(),(0,t.j4)(D,(0,t.dG)({key:a.label,"filter-method":a.filters&&e.filterHandler,"show-overflow-tooltip":!a.wrap},a),(0,t.Nv)({_:2},[a.labelSlot?{name:"header",fn:(0,t.w5)((l=>[(0,t.WI)(e.$slots,a.labelSlot,(0,o.vs)((0,t.F4)(l)),void 0,!0)])),key:"0"}:void 0,a.tdSlot?{name:"default",fn:(0,t.w5)((l=>[(0,t.WI)(e.$slots,a.tdSlot,(0,o.vs)((0,t.F4)(l)),void 0,!0)])),key:"1"}:void 0]),1040,["filter-method","show-overflow-tooltip"])))),128))])),_:3},8,["data","row-key","tree-props","lazy","load","border","onSelectionChange"])),[[z,e.loading]])]),e.paginationConfig.show&&e.total>0?((0,t.wg)(),(0,t.j4)(U,{key:2,class:"pagination",style:(0,o.j5)(e.paginationConfig.style),onSizeChange:e.handleSizeChange,currentPage:e.pageNum,"onUpdate:currentPage":a[0]||(a[0]=a=>e.pageNum=a),onCurrentChange:e.handleCurrentChange,"page-sizes":e.paginationConfig.pageSizes,pageSize:e.pageSize,"onUpdate:pageSize":a[1]||(a[1]=a=>e.pageSize=a),layout:e.paginationConfig.layout,total:e.total},null,8,["style","onSizeChange","currentPage","onCurrentChange","page-sizes","pageSize","layout","total"])):(0,t.kq)("",!0)])}var p=l(4870);const h=(e,a)=>{var l={"M+":e.getMonth()+1,"D+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var t in/(y+)/i.test(a)&&(a=a.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),l)new RegExp("("+t+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?l[t]:("00"+l[t]).substr((""+l[t]).length)));return a},c=e=>{const a={};return e&&e.fields&&e.fields.forEach((e=>{switch(e.type){case"checkbox":case"checkbox-button":a[e.name]=[];break;default:break}void 0!==e.defaultValue&&(a[e.name]=e.defaultValue,("daterange"===e.type||"datetimerange"===e.type)&&e.trueNames&&Array.isArray(e.defaultValue)&&e.defaultValue.forEach(((l,t)=>{a[e.trueNames[t]]=l})))})),a};var m=(0,t.aZ)({props:{request:{type:Function},title:{type:String,default:""},hideTitleBar:{type:Boolean,default:!1},search:{type:[Boolean,Object],default:!1},border:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},rowKey:{type:String,default:"id"},pagination:{type:[Boolean,Object],default:()=>({})},tree:{type:Object,default:()=>({})}},setup(e,{emit:a}){const l=e=>{const a=JSON.parse(JSON.stringify(n.searchModel));return e&&e.fields&&e.fields.forEach((e=>{a.hasOwnProperty(e.name)&&(e.transform&&(a[e.name]=e.transform(a[e.name])),"daterange"!==e.type&&"datetimerange"!==e.type||!e.trueNames||delete a[e.name])})),a},o=async()=>{n.loading=!0;const a=l(e.search),{data:t,total:o}=await e.request({pageNum:n.pageNum,pageSize:n.pageSize,...a});n.loading=!1,n.tableData=t,n.total=o};(0,t.wF)((()=>{o()}));const n=(0,p.qj)({searchModel:c(e.search),loading:!1,tableData:[],total:0,pageNum:1,pageSize:!!e.pagination&&e.pagination.pageSize||10,paginationConfig:{show:!1},handleSearch(){n.pageNum=1,o()},handleReset(){"{}"!==JSON.stringify(n.searchModel)&&(n.pageNum=1,n.searchModel=c(e.search),o())},refresh(){o()},handleCurrentChange(e){o()},handleSizeChange(e){n.pageNum=1,o()},handleSelectionChange(e){a("selectionChange",e)},filterHandler(e,a,l){const t=l["property"];return a[t]===e},handleDateChange(e,a,l){n.searchModel[a.name]=e?h(e,l):""},handleRangeChange(e,a,l){const t=!!e&&e.map((e=>h(e,l)));n.searchModel[a.name]=t||[],a.trueNames&&(t?t.forEach(((e,l)=>{n.searchModel[a.trueNames[l]]=e})):a.trueNames.forEach((e=>{delete n.searchModel[e]})))}});if("object"===typeof e.pagination){const{layout:a,pageSizes:l,style:t}=e.pagination;n.paginationConfig={show:!0,layout:a||"total, sizes, prev, pager, next, jumper",pageSizes:l||[10,20,30,40,50,100],style:t||{}}}return{...(0,p.BK)(n)}}}),g=l(89);const y=(0,g.Z)(m,[["render",u],["__scopeId","data-v-1566deac"]]);var w=y;function f(e,a={}){f.installed||(f.installed=!0,e.component("vue3-pro-table",w))}w.install=f;var b=w}}]);
//# sourceMappingURL=76.e765c096.js.map